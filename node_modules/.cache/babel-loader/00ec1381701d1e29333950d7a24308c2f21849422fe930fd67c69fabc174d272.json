{"ast":null,"code":"import { deleteDoc, doc } from \"firebase/firestore\";\nimport { deleteObject, ref } from \"firebase/storage\";\nfunction useDeleteDocument(db, storage, data, setData) {\n  const handleDeleteDocument = async documentId => {\n    const documentData = data.find(item => item.id === documentId);\n    const imageRef1 = ref(storage, documentData.imageURL1);\n    const imageRef2 = ref(storage, documentData.imageURL2);\n    try {\n      if (!db) return;\n      await deleteDoc(doc(db, \"glooyaData\", documentId));\n      await Promise.all([deleteObject(imageRef1), deleteObject(imageRef2)]);\n      console.log(\"Document and images successfully deleted.\");\n    } catch (error) {\n      console.error(\"Error deleting document and images:\", error);\n    }\n    setData(prevData => prevData.filter(item => item.id !== documentId));\n  };\n  return handleDeleteDocument;\n}\nexport default useDeleteDocument;","map":{"version":3,"names":["deleteDoc","doc","deleteObject","ref","useDeleteDocument","db","storage","data","setData","handleDeleteDocument","documentId","documentData","find","item","id","imageRef1","imageURL1","imageRef2","imageURL2","Promise","all","console","log","error","prevData","filter"],"sources":["/Users/dortagger/Desktop/Code/glooyot/src/hooks/useDeleteDocument.ts"],"sourcesContent":["import { Firestore, deleteDoc, doc } from \"firebase/firestore\";\nimport { FirebaseStorage, deleteObject, ref } from \"firebase/storage\";\n\nfunction useDeleteDocument(\n  db: Firestore | null,\n  storage: FirebaseStorage,\n  data: any[],\n  setData: React.Dispatch<React.SetStateAction<any[]>>\n) {\n  const handleDeleteDocument = async (documentId: string) => {\n    const documentData = data.find((item) => item.id === documentId);\n    const imageRef1 = ref(storage, documentData.imageURL1);\n    const imageRef2 = ref(storage, documentData.imageURL2);\n\n    try {\n      if (!db) return;\n\n      await deleteDoc(doc(db, \"glooyaData\", documentId));\n      await Promise.all([deleteObject(imageRef1), deleteObject(imageRef2)]);\n      console.log(\"Document and images successfully deleted.\");\n    } catch (error) {\n      console.error(\"Error deleting document and images:\", error);\n    }\n    setData((prevData) => prevData.filter((item) => item.id !== documentId));\n  };\n\n  return handleDeleteDocument;\n}\n\nexport default useDeleteDocument;\n"],"mappings":"AAAA,SAAoBA,SAAS,EAAEC,GAAG,QAAQ,oBAAoB;AAC9D,SAA0BC,YAAY,EAAEC,GAAG,QAAQ,kBAAkB;AAErE,SAASC,iBAAiBA,CACxBC,EAAoB,EACpBC,OAAwB,EACxBC,IAAW,EACXC,OAAoD,EACpD;EACA,MAAMC,oBAAoB,GAAG,MAAOC,UAAkB,IAAK;IACzD,MAAMC,YAAY,GAAGJ,IAAI,CAACK,IAAI,CAAEC,IAAI,IAAKA,IAAI,CAACC,EAAE,KAAKJ,UAAU,CAAC;IAChE,MAAMK,SAAS,GAAGZ,GAAG,CAACG,OAAO,EAAEK,YAAY,CAACK,SAAS,CAAC;IACtD,MAAMC,SAAS,GAAGd,GAAG,CAACG,OAAO,EAAEK,YAAY,CAACO,SAAS,CAAC;IAEtD,IAAI;MACF,IAAI,CAACb,EAAE,EAAE;MAET,MAAML,SAAS,CAACC,GAAG,CAACI,EAAE,EAAE,YAAY,EAAEK,UAAU,CAAC,CAAC;MAClD,MAAMS,OAAO,CAACC,GAAG,CAAC,CAAClB,YAAY,CAACa,SAAS,CAAC,EAAEb,YAAY,CAACe,SAAS,CAAC,CAAC,CAAC;MACrEI,OAAO,CAACC,GAAG,CAAC,2CAA2C,CAAC;IAC1D,CAAC,CAAC,OAAOC,KAAK,EAAE;MACdF,OAAO,CAACE,KAAK,CAAC,qCAAqC,EAAEA,KAAK,CAAC;IAC7D;IACAf,OAAO,CAAEgB,QAAQ,IAAKA,QAAQ,CAACC,MAAM,CAAEZ,IAAI,IAAKA,IAAI,CAACC,EAAE,KAAKJ,UAAU,CAAC,CAAC;EAC1E,CAAC;EAED,OAAOD,oBAAoB;AAC7B;AAEA,eAAeL,iBAAiB"},"metadata":{},"sourceType":"module","externalDependencies":[]}